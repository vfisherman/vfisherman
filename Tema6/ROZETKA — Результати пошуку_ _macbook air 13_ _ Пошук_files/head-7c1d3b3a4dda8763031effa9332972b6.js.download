var GetRandomItems_class=new Class({options:{tpl:"",items:[],limit:3},getContent:function(){var a=[];if(this.options.items.length<=this.options.limit)a=this.options.items;else for(var b=0;b<this.options.limit;b++){var c=this.options.items.getRandom();a.include(c);this.options.items.erase(c)}return a.length?App.getHTML(this.options.tpl,{items:a}):""}});GetRandomItems_class.implement(new Options);
var GTMData_BaseProduct_class=GTMData_BaseAbstract_class.extend({Class:"GTMData_BaseProduct_class",options:{GTM:{events:{add_to_wishlist_in_cart:{event_name:"clickToWishlistInCart",extend_event:[{name:"eventCategory",value:"Conversions"},{name:"eventLabel",value:"addToWishlist"},{name:"eventLocation",value:"cart"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventProductName",handlerID:"getProductTitle"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},
{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},openWishlistPopup:{event_name:"openWishlistPopup",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventLabel",value:"popupWishlist"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventProductName",handlerID:"getProductTitle"},
{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},add_to_order_in_cart:{event_name:"clickAddToOrderInCart",extend_event:[{name:"eventCategory",value:"Conversions"},{name:"eventLabel",value:"buyButton"},{name:"eventLocation",value:"recommendedCart"},{name:"eventProductId",
handlerID:"getProductId"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventProductName",handlerID:"getProductTitle"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductPromo",handlerID:"getProductTag"},{name:"eventContent",handlerID:"getContent"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"},{name:"eventProductVendorId",handlerID:"getProducerId"}]},
cancel_delete_from_cart:{event_name:"clickCancelDeleteFromCart",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLabel",value:"cancel"},{name:"eventLocation",value:"cart"}]},close_wishlist_in_cart:{event_name:"closeWishlistInCart",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLabel",value:"closeWishlist"}]},continue_shopping:{event_name:"clickContinueShopping",extend_event:[{name:"eventAction",
value:"click"},{name:"eventLabel",value:"continueShopping"}]},open_profile:{event_name:"clickOpenProfile",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLabel",value:"openProfile"},{name:"eventLocation",value:"cart"}]},open_wishlist:{event_name:"clickOpenWishlist",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLabel",value:"openWishlist"},{name:"eventContext",handlerID:"getContext"}]},
save_wishlist:{event_name:"clickSaveWishlist",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLabel",value:"saveWishlist"},{name:"eventLocation",value:"cart"}]},social:{event_name:"clickSocial",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLabel",value:"social"},{name:"eventLocation",value:"cart"}]},open_cart:{event_name:"openCart",extend_event:[{name:"eventCategory",value:"Conversions"},
{name:"eventAction",value:"click"},{name:"eventLabel",value:"openCart"}]},show_accessories:{event_name:"sendAccessoriesGTM",extend_event:[{name:"eventCategory",value:"Non-Interactions"},{name:"eventAction",value:"show"},{name:"eventLabel",value:"goods"}]},close_cart:{event_name:"closeCart",extend_event:[{name:"eventCategory",value:"Conversions"},{name:"eventAction",value:"click"},{name:"eventLabel",value:"closeCart"}]},openCityPopup:{event_name:"clickToPopupCity",extend_event:[{name:"eventCategory",
value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLabel",value:"cityPopup"},{name:"eventLocation",value:"Head"}]},changeCity:{event_name:"changeCity",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLabel",value:"cityChoose"},{name:"eventLocation",value:"head"}]},add_to_cart:{event_name:"clickToPurchases",extend_event:[{name:"eventCategory",value:"Conversions"},{name:"eventLabel",value:"buyButton"},{name:"eventProductId",handlerID:"getProductId"},
{name:"eventValue",handlerID:"getProductPrice"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventProductPromo",handlerID:"getProductTag"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"},{name:"eventContent",handlerID:"getProductSource"}]},add_service_from_cart:{event_name:"addServiceToPurchases",extend_event:[{name:"eventCategory",
value:"Conversions"},{name:"eventLabel",value:"buyButton"},{name:"eventAction",value:"click"}]},remove_service_from_cart:{event_name:"removeServiceFromPurchases",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventLabel",value:"service"},{name:"eventAction",value:"remove"}]},check_service:{event_name:"checkService",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventLabel",value:"service"},{name:"eventAction",value:"click"},{name:"eventContent",value:"check"}]},
uncheck_service:{event_name:"uncheckService",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventLabel",value:"service"},{name:"eventAction",value:"click"},{name:"eventContent",value:"uncheck"}]},add_to_comparison:{event_name:"clickAddToCompare",extend_event:[{name:"eventLabel",value:"addToCompare"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventProductName",handlerID:"getProductTitle"},{name:"eventProductCategoryId",
handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventContext",handlerID:"getProductCountComments"},{name:"eventPosition",handlerID:"getPosition"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},change_quantity:{event_name:"changeQuantityPurchases",extend_event:[{name:"eventLabel",value:"changeQuantity"},{name:"eventProductId",handlerID:"getProductId"},
{name:"eventValue",handlerID:"getProductPrice"},{name:"eventProductName",handlerID:"getProductTitle"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},scroller:{event_name:"scrollerUse",extend_event:[{name:"eventAction",value:"scroll"}]},suggest:{event_name:"suggestShow",
extend_event:[{name:"eventAction",value:"show"},{name:"eventCategory",value:"Interactions"},{name:"eventLabel",value:"suggest"},{name:"eventNoninteraction",value:1}]},goods_title_click:{event_name:"goodsTitleClick",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLabel",value:"openProductPage"},{name:"eventContext",value:"title"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventContent",handlerID:"getContent"},{name:"eventValue",
handlerID:"getProductPrice"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventPosition",handlerID:"getPosition"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},goods_image_click:{event_name:"goodsImageClick",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},
{name:"eventLabel",value:"openProductPage"},{name:"eventContext",value:"photo"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventContent",handlerID:"getContent"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventPosition",handlerID:"getPosition"},{name:"eventMerchantId",handlerID:"getMerchantId"},
{name:"eventSellerId",handlerID:"getSellerId"}]},toggleVarDetailsDropDown:{event_name:"toggleVarDetailsDropDown",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLocation",value:"ProductPage"},{name:"eventLabel",value:"variantOpen"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},
{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},variant_image_click:{event_name:"variantImageClick",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLocation",value:"OtherColorPopUpCatalog"},{name:"eventLabel",value:"openProductPage"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventContext",value:"photo"},{name:"eventValue",
handlerID:"getProductPrice"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventPosition",handlerID:"getPosition"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},delete_from_cart:{event_name:"deleteFromPurchases",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"remove"},
{name:"eventLabel",value:"product"},{name:"eventLocation",value:"cart"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"},{name:"products",handler:"getKitProducts"}]},before_delete_from_cart:{event_name:"beforeDeleteFromPurchases",
extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLabel",value:"remove"},{name:"eventContent",value:location.href},{name:"eventLocation",value:"cart"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",
handlerID:"getSellerId"}]},add_kit_to_cart:{event_name:"clickKitToPurchases",extend_event:[{name:"eventCategory",value:"Conversions"},{name:"eventLabel",value:"buyKit"},{name:"eventLocation",value:"kitCart"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventContent",value:"set"},{name:"products",handler:"getKitProducts"}]},to_checkout_from_cart:{event_name:"goToCheckoutFromCart",extend_event:[{name:"eventLabel",value:"checkout"}]},to_checkout_from_head:{event_name:"goToCheckoutFromHead",
extend_event:[{name:"eventLabel",value:"checkout"},{name:"eventLocation",value:"Head"}]},recent_save:{event_name:"clickSaveRecent",extend_event:[{name:"eventLabel",value:"saveRecentHistory"}]},show_recent:{event_name:"showAllRecentGoods",extend_event:[{name:"eventLabel",value:"openRecentHistory"}]},for_gift_in_cart:{event_name:"forGiftClick",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventLabel",value:"forPresent"}]},not_added_to_cart:{event_name:"not_added_to_cart",extend_event:[{name:"eventCategory",
value:"Conversions"},{name:"eventLabel",value:"notAdd"},{name:"eventAction",value:"error"},{name:"eventNoninteraction",value:1},{name:"eventProductId",handlerID:"getProductId"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"}]},open_cart_popup:{event_name:"openCart",extend_event:[{name:"eventLabel",value:"showAll"},{name:"eventLocation",value:"SearchBar"}]},open_category_search:{event_name:"openCategorySearch",extend_event:[{name:"eventLabel",value:"openCategory"},{name:"eventLocation",
value:"SearchBar"}]},show_category_search:{event_name:"showCategorySearch",extend_event:[{name:"eventLabel",value:"showCategory"},{name:"eventAction",value:"show"},{name:"eventLocation",value:"SearchBar"}]},search_button:{event_name:"searchButton",extend_event:[{name:"eventLabel",value:"searchButton"},{name:"eventLocation",value:"searchResults"}]},comparison_header:{selector:"[id=comparison]",extend_event:[{name:"eventLabel",value:"comparison"}]},wishlist_header:{event_name:"clickWishlistHeader",
extend_event:[{name:"eventLabel",value:"wishlist"}]},enter_profile:{event_name:"enterProfile",extend_event:[{name:"eventLabel",value:"enterProfile"},{name:"eventContext",value:"permanent"}]},choose_compare:{event_name:"chooseCompare",extend_event:[{name:"eventLabel",value:"chooseCompare"}]},profile_menu:{event_name:"profileMenu",extend_event:[{name:"eventLabel",value:"profileMenu"}]},profile:{event_name:"profile",extend_event:[{name:"eventLabel",value:"profile"}]},openBonusesPopup:{event_name:"openBonusesPopup",
extend_event:[{name:"eventLabel",value:"openBonusesPopup"},{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventContent",handlerID:"getUserPLStatus"},{name:"eventLocation",handlerID:"getPLEventLocation"}]},useBonuses:{event_name:"useBonuses",extend_event:[{name:"eventLabel",value:"useBonuses"},{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventContent",handlerID:"getUserPLStatus"},{name:"eventLocation",handlerID:"getPLEventLocation"}]},
enterProfile:{event_name:"enterProfile",extend_event:[{name:"eventLabel",value:"enterProfile"},{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventContent",handlerID:"getUserPLStatus"},{name:"eventLocation",handlerID:"getPLEventLocation"}]},openRozetkaClubPage:{event_name:"openRozetkaClubPage",extend_event:[{name:"eventLabel",value:"openRozetkaClubPage"},{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventContent",handlerID:"getUserPLStatus"},
{name:"eventLocation",handlerID:"getPLEventLocation"}]},wantConfirmPhone:{event_name:"wantConfirmPhone",extend_event:[{name:"eventLabel",value:"wantConfirmPhone"},{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventContent",handlerID:"getUserPLStatus"},{name:"eventLocation",handlerID:"getPLEventLocation"}]},registration:{event_name:"registration",extend_event:[{name:"eventLabel",value:"registration"},{name:"eventCategory",value:"Conversions"}]},remove:{event_name:"removeFromComparison",
extend_event:[{name:"eventLabel",value:"product"},{name:"eventAction",value:"remove"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventProduct\u0421ategoryId",handlerID:"getProductCategoryId"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventLocation",value:"compare"},{name:"eventProduct\u0421ategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},
closeAuthPopup:{event_name:"closeAuthPopup",extend_event:[{name:"eventLabel",value:"closeAuthPopup"}]},social_signup_success:{event_name:"social_signup_success",extend_event:[{name:"eventCategory",value:"Conversions"},{name:"eventAction",value:"signup"},{name:"eventLabel",value:"social"}]},more20productCompare:{event_name:"more20productCompare",extend_event:[{name:"eventLabel",value:"more20productCompare"},{name:"eventAction",value:"show"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"}]},
carousel_scroll:{event_name:"carousel_scroll",extend_event:[{name:"eventLabel",value:"kit"},{name:"eventAction",value:"scroll"},{name:"eventLocation",value:"ProductPage"},{name:"eventContent",value:"complement"}]},productsImpressions:{event_name:"productsImpressions",extend_event:[{name:"eventCategory",value:"Non-Interactions"},{name:"eventAction",value:"show"},{name:"eventLabel",value:"goods"}]},track_order:{event_name:"trackOrder",extend_event:[{name:"eventLabel",value:"trackOrder"},{name:"eventLocation",
value:"head"}]},registrationSuccess:{event_name:"registrationSuccess",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"signup"},{name:"eventLabel",value:"registrationSuccess"}]}}}},base_GTM_event:{eventCategory:"Interactions",eventAction:"click"},storage:null,initialize:function(a,b){this.storage=a;void 0!==b&&this.setOptions(b);this.options.additional.base_GTM_event&&Object.merge(this.base_GTM_event,this.options.additional.base_GTM_event)},getProductId:function(a){return parseInt(a,
10)},getProductPrice:function(a,b){return this._getPrice(a,b,"price_usd")},getProductRawPrice:function(a,b){var c=this._getPrice(a,b,"price_usd_raw");return null==c?this.getProductPrice(a,b):c},getProductSource:function(a,b){return this.storage.getGoodsDataField(a,"source",b)},getProductTag:function(a,b){return this.storage.getGoodsDataField(a,"tag",b)},getProductTitle:function(a,b){return this.storage.getGoodsDataField(a,"title",b)},getProductCategoryId:function(a,b){var c=this.storage.getGoodsDataField(a,
"parent_id",b);c&&(c=parseInt(c,10));return c},getProducerId:function(a,b){var c=this.storage.getGoodsDataField(a,"producer_id",b);c&&(c=parseInt(c,10));return c},getTopParentId:function(a,b){var c=this.storage.getGoodsDataField(a,"top_parent_id",b);c&&(c=parseInt(c,10));return c},getPosition:function(a){a=$E("[name=position_number"+a+"]")||$E("[name=slider_pos_number"+a+"]");var b=null;a&&a.value&&(b=parseInt(a.value,10));return b},getTitle:function(a){return(a.target||a.srcElement).getText().trim()},
getProductCategoryName:function(a,b){return this.storage.getGoodsDataField(a,"parent",b)},getProductCountComments:function(a,b){return this.storage.getGoodsDataField(a,"count_comments",b)},getKitProducts:function(a){var b=[],c=[],d=1,e,f=["product\u0421ategoryId","product\u0421ategoryGroupId"],g=function(a){Object.each(a,function(a){"object"==typeof a?g(a):a&&parseInt(a,10)&&c.push(a)})};a.goods_ids&&(g(a.goods_ids),c.each(function(a){e={productId:this.getProductId(a),productName:this.getProductTitle(a),
productVendorId:this.getProducerId(a),productQuantity:1,position:d++,productMerchantId:this.getMerchantId(a),productSellerId:this.getSellerId(a)};e[f[0]]=this.getProductCategoryId(a);e[f[1]]=this.getTopParentId(a);this.getProductRawPrice(a)&&(e.productPrice=this.getProductRawPrice(a));b.push(e)}.bind(this)));return b},getContent:function(a){var b=null;(a=$$("[name=content_gtm"+a+"]")[0])&&a.value&&(b=a.value);return b},getContext:function(){return User.isAuth()?"existingUser":"newUser"},getSellerId:function(a,
b){var c=this.storage.getGoodsDataField(a,"seller_id",b);c&&(c=parseInt(c,10));return c},getPLEventLocation:function(){var a;window.User&&(a=User.getProgramLoyaltiData(),a=a.is_header?"rozetkaClub Head":"rozetkaClub ProductPage");return a},getUserPLStatus:function(){var a="notAuthorized",b;User.isAuth()&&(b=User.getProgramLoyaltiData())&&(a="Unconfirm",b.loyalty_accepted&&(a=b.exist_phone?"Active":"Unverified"));return a},getMerchantId:function(a,b){var c=this.storage.getGoodsDataField(a,"merchant_id",
b);c&&(c=parseInt(c,10));return c},_getCurrentTargetData:function(a){var b=new Event;return b&&b.event.currentTarget&&b.event.currentTarget.data(a)},_getPrice:function(a,b,c){(a=this.storage.getGoodsDataField(a,c,b))&&(a=parseFloat(a));return a}}),GTMData_SearchPage_class=GTMData_BaseProduct_class.extend({Class:"GTMData_SearchPage_class",options:{GTM:{events:{add_to_wishlist:{event_name:"clickToWishlist",extend_event:[{name:"eventCategory",value:"Conversions"},{name:"eventLabel",value:"addToWishlist"},
{name:"eventContent",handlerID:"getContent"},{name:"eventTestVariant",handlerID:"getTestVariant"},{name:"eventError",handlerID:"getError"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventProductName",handlerID:"getProductTitle"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventPosition",handlerID:"getPosition"},
{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},addToWaitlist:{event_name:"addToWaitlist",extend_event:[{name:"eventCategory",value:"Conversions"},{name:"eventLabel",value:"addToWaitlist"},{name:"eventContent",handlerID:"getContent"},{name:"eventTestVariant",handlerID:"getTestVariant"},{name:"eventError",handlerID:"getError"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventProductName",
handlerID:"getProductTitle"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventPosition",handlerID:"getPosition"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},goods_title_click:{extend_event:[{name:"asd",value:"openProductPage"},{name:"eventLabel",value:"openProductPage"},{name:"eventContext",value:"title"},
{name:"eventContent",handlerID:"getContent"},{name:"eventTestVariant",handlerID:"getTestVariant"},{name:"eventError",handlerID:"getError"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},
goods_image_click:{extend_event:[{name:"eventLabel",value:"openProductPage"},{name:"eventContext",value:"photo"},{name:"eventContent",handlerID:"getContent"},{name:"eventTestVariant",handlerID:"getTestVariant"},{name:"eventError",handlerID:"getError"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",
handlerID:"getProducerId"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},add_to_cart:{extend_event:[{name:"eventCategory",value:"Conversions"},{name:"eventLabel",value:"buyButton"},{name:"eventContent",handlerID:"getContent"},{name:"eventTestVariant",handlerID:"getTestVariant"},{name:"eventError",handlerID:"getError"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventProductName",handlerID:"getProductTitle"},
{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},click_reviews:{event_name:"commentsLinkClick",extend_event:[{name:"eventLabel",value:"reviews"},{name:"eventLocation",value:"searchResults"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventProductCategoryId",
handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},page_number_click:{event_name:"pageNumberClick",extend_event:[{name:"eventLabel",value:"pageNumber"}]},search:{event_name:"searchPage",extend_event:[{name:"eventAction",value:"show"},{name:"eventCategory",value:"Interactions"},{name:"eventLabel",value:"search"},
{name:"eventNoninteraction",value:1}]},more_pages:{event_name:"morePages",extend_event:[{name:"eventLabel",value:"morePages"}]},open_info:{event_name:"openInfo",extend_event:[{name:"eventLabel",value:"openInfo"},{name:"eventLocation",value:"leftMenu"}]},level:{event_name:"level",extend_event:[{name:"eventLocation",value:"leftMenu"}]}}}},getLabel:function(a){return"group_category"==(a.target||a.srcElement).getProperty("data-name")?"openGroupCategory":"openCategory"},getContent:function(a,b){var c=
"";this.storage.getGoodsDataField(a,"part",b)&&(c=this.storage.getGoodsDataField(a,"part",b)+":"+this.storage.getGoodsDataField(a,"rank",b));return c},getTestVariant:function(a,b){var c="";this.storage.getGoodsDataField(a,"part",b)&&(c=this.storage.getGoodsDataField(a,"type",b)+":"+this.storage.getGoodsDataField(a,"part",b));return c},getError:function(a,b){return this.storage.getGoodsDataField(a,"search_text",b)}}),EndlessScroll_class=new Class({Class:"EndlessScroll_class",content:null,more_button:null,
paginator:null,url:null,enabled:!0,next_page:null,options:{content_selector:"[name=goods_list]",more_button_selector:"[name=more_goods]",paginator_selector:"[name=paginator]",active_page_class:"active",current_page:1,total_pages:1,append_to_bottom:!0,page_param_name:"page",additional_params:{scroll:!0}},initialize:function(a,b){var c=$(a);this.content=c.getElement(this.options.content_selector);this.more_button=c.getElement(this.options.more_button_selector);this.paginator=c.getElement(this.options.paginator_selector);
this.url=b;this._bindEvents()},showPage:function(a){0<a&&a!=this.options.current_page&&a<=this.options.total_pages&&(this.content.processStart('<img src="http://i1.rozetka.ua/ajax.gif" width="64" height="64" alt="\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445" class="process"/>'),this.enabled=!1,this._sendRequest(a))},_sendRequest:function(a){var b={};b[this.options.page_param_name]=a;b=App.buildUrl(this.url,Object.merge(b,this.options.additional_params));this.next_page=
a;(new Ajax(b,{method:"get",onComplete:this._onComplete.bind(this)})).request()},_onComplete:function(a){this.content.processStop();this.options.current_page=this.next_page;this.options.current_page==this.options.total_pages?this.more_button.addClass("hidden"):this.enabled=!0;a=(new Element("div")).setHTML(a);this.options.append_to_bottom||(this.content.innerHTML="",window.scrollTo(0,this.content.offsetTop));this.content.adopt(a);this.paginator&&this._setActivePage();if(!window.gecko||window.ff4AndGreater)a=
a.getElements("script"),a.length&&a.each(this._execute)},_setActivePage:function(){var a=this.paginator.getElement("[name="+this.options.current_page+"]")||this.paginator.getElement("[name=\u2026]")||null;a&&a.addClass(this.options.active_page_class)},_bindEvents:function(){this.more_button&&this.more_button.addEvent("click",function(a){(new Event(a)).stop();this.enabled&&this.showPage(this.options.current_page+1)}.bind(this))},_execute:function(a){eval(a.innerHTML)}});EndlessScroll_class.implement(new Options);
var RozetkaPaginator_class=new Class({Class:"RozetkaPaginator_class",options:{template:'{for node in getPages()}\n\t<li class="paginator-catalog-l-i{if node.is_active} active{/if}" id="${node.name}">\n\t\t{if node.is_active}\n\t\t\t<span class="novisited paginator-catalog-l-link">${node.title}</span>\n\t\t{else}\n\t\t\t<span class="paginator-catalog-l-i-active hidden">${node.title}</span>\n\t\t\t<a href="${node.link}"\n\t\t\t   class="novisited paginator-catalog-l-link"\n\t\t\t   onclick="document.fireEvent(\'pageNumberClick\',{extend_event:[{name:\'eventContext\',value:\'${node.value}\'}]});"\n\t\t\t>${node.title}</a>\n\t\t{/if}\n\t</li>\n{/for}',
page_param_name:"page",index_correction:0,midpoint:5,symbol_hellip:"&hellip;",additional_params:[],starts_from:1,current_page:0,total_pages:0,create_hash_url:!1},pages:[],_url:null,_container:null,initialize:function(a,b){this._container=a;this._url=b;return this},init:function(){this.options.starts_from=this.options.current_page;this.addEvent("loadComplete",this._loadComplete.bind(this));this.attachToObserver(["ChangeShowType"]);return this},onChangeShowType:function(){this._updatePaginator()},_loadComplete:function(a){this.options.current_page=
a;this._updatePaginator()},_getPageUrl:function(a){var b=this.options.additional_params;b[this.options.page_param_name]=a;this.options.create_hash_url?(a=Object.extend(location.parseHash()||{},b),a=location.createHash(a)):a=App.buildUrl(this._url,b)+document.location.hash;return a},_updatePaginator:function(){var a=(this.options.midpoint-1)/2+1,b=this.options.current_page+this.options.index_correction,c=Math.floor(b-a),a=Math.ceil(b+a);this.pages=[];this.pages[1]=this._getPageData(1);for(b=c;b<=a;b++)1<
b&&b<this.options.total_pages&&(this.pages[b]=this._getPageData(b,c,a));this.pages[this.options.total_pages]=this._getPageData(this.options.total_pages);this._container.setHTML(App.getHTML(this.options.template,this))},getPages:function(){return this.pages},_getPageData:function(a,b,c){var d=a+this.options.index_correction;return{link:this._getPageUrl(d),name:"page"+d,value:a,title:this._isHellip(a,b,c)?this.options.symbol_hellip:a,is_active:a>=this.options.starts_from&&a<=this.options.current_page}},
_isHellip:function(a,b,c){return a==b&&2<a||a==c&&c<this.options.total_pages-2}});RozetkaPaginator_class.implement(new Events,new Options);
var RozetkaEndlessScroll_class=EndlessScroll_class.extend({options:{items_per_page:24,button_text_selector:"[name=button_text]",last_button_text:"",preloader_class:"run-animation",paginator:{classname:"RozetkaPaginator_class",enabled:!1,midpoint:5,selector:"[name=paginator]",index_correction:0,additional_params:{}}},clicks_count:0,_container:null,_paginator:null,initialize:function(a,b){this._container=a;this.url=b;this.attachToObserver([])},init:function(){this.content=this._container.getElement(this.options.content_selector);
this.more_button=this._container.getElement(this.options.more_button_selector);this.paginator=this._container.getElement(this.options.paginator_selector);this._bindEvents();var a=this._container.getElement(this.options.paginator.selector);if(this.options.paginator.enabled&&a){var b=App.getConstructorByClassName(this.options.paginator.classname),c=this.options.paginator.hasOwnProperty("options")?this.options.paginator.options:{};this._paginator=(new b(a,this.url)).setOptions(Object.extend(c,{total_pages:this.options.total_pages,
current_page:this.options.current_page,midpoint:this.options.paginator.midpoint,index_correction:this.options.paginator.index_correction,additional_params:this.options.paginator.additional_params,page_param_name:this.options.page_param_name})).init()}},showPage:function(a){0<a&&a!=this.options.current_page&&a<=this.options.total_pages&&(this.more_button.processStart(""),this.more_button.addClass(this.options.preloader_class),this.enabled=!1,this._sendRequest(a),this.clicks_count++,document.fireEvent("clickMoreButton",
{extend_event:[{name:"eventLabel",value:this.options.items_per_page+"goodsMore"},{name:"eventPosition",value:this.clicks_count}]}))},_getUrl:function(a){var b={};b[this.options.page_param_name]=a;return App.buildUrl(this.url,Object.merge(b,this.options.additional_params))},_isHideMoreButton:function(){return this.options.current_page==this.options.total_pages},_sendRequest:function(a){var b=this._getUrl(a);(new Ajax(b,{method:"get",onComplete:function(b){var d=[];this.more_button.removeClass(this.options.preloader_class);
this.more_button.processStop();this.options.current_page=a;b=(new Element("div")).setHTML(b);var e=b.getElements("script");this.options.append_to_bottom||(this.content.innerHTML="",window.scrollTo(0,this.content.offsetTop));this.more_button.getParent().removeChild(this.more_button);b.getChildren().each(function(a){this.content.adopt(a);d.push(a)}.bind(this));this._isHideMoreButton()||(this.content.adopt(this.more_button),""!=this.options.last_button_text&&this.options.current_page==this.options.total_pages-
1&&(this.more_button.getElement(this.options.button_text_selector).innerHTML=this.options.last_button_text),this.enabled=!0);(!window.gecko||window.ff4AndGreater)&&e.length&&e.each(this._execute);App.fireEvent("renewImages");this.firePluginEvent("loadContentComplete");this._paginator&&this._paginator.fireEvent("loadComplete",this.options.current_page);document.fireEvent("loadContentComplete");this.fireEvent("LoadBodyPage",d)}.bind(this)})).request()}});
RozetkaEndlessScroll_class.implement(new Events,new Options,new PluginEvents_class);
var RozetkaSearchEndlessScroll_class=RozetkaEndlessScroll_class.extend({options:{current_page:0,page_param_name:"p",search:{text:""},redirected:0},_params:{scroll:"true"},initialize:function(a,b){this._params.hasOwnProperty("p")&&(this.options.current_page=this._params.p.toInt());this.parent(a,b)},init:function(){this.options.search.section=encodeURIComponent(this.options.search.section);this.options.paginator.additional_params=this.options.search;this._params=Object.merge(this._params,this.options.search);
1===this.options.redirected&&(this._params.redirected=1,this.options.paginator.additional_params.redirected=1);this.parent()},_getUrl:function(a){this._params[this.options.page_param_name]=a-1;return App.buildUrl(this.url,this._params)}}),RozetkaScrollTopButton_class=new Class({Class:"RozetkaScrollTopButton_class",options:{duration:400,opacity_range:300},_button:null,initialize:function(a){this._button=a},init:function(){window.addEvent("resize",function(a){this.update()}.bind(this));window.addEvent("scroll",
function(a){this.update()}.bind(this));this._button.addEvent("click",function(a){(new Event(a)).stop();(new Fx.Scroll(this.getBody())).setOptions({duration:this.options.duration}).toTop()}.bind(this));this.update()},getBody:function(){return document.documentElement.scrollTop?document.documentElement:document.body},update:function(){var a=this.getBody().scrollTop,b=document.body.clientHeight;a>b?(0<b+this.options.opacity_range-a?this._button.setOpacity((a-b)/(this.options.opacity_range/100)/100):
this._button.setOpacity(1),this._button.isVisible()||this._button.show()):this._button.hide()}});RozetkaScrollTopButton_class.implement(new Events,new Options);
var SearchMenuCategoriesLeft_class=new Class({options:{selectors:{container:"search-m-cat-left",blocks:'[name="search_m-cat-sub-left"]',more_button:'[name="show_more_categories"]',hide_button:'[name="hide_more_categories"]',hidden_elements:"[can_hide=1]"},use_animation:!0,radix:10},_elements:{},_is_running:!1,initialize:function(a){this.setOptions(a);document.getElementById(this.options.selectors.container).getElements(this.options.selectors.blocks).each(function(a){var c=a.getProperty("param");this._elements[c]=
{block:a,show_more_btn:a.getParent().getElement(this.options.selectors.more_button),hide_more_btn:a.getParent().getElement(this.options.selectors.hide_button)};this._initEvents(c)}.bind(this))},_initEvents:function(a){var b=this.getElementsByName(a);b.show_more_btn&&b.hide_more_btn&&(b.show_more_btn.addEvent("click",function(b){(new Event(b)).stop();this._is_running||this.showHiddenCategories(a,!0)}.bind(this)),b.hide_more_btn.addEvent("click",function(b){(new Event(b)).stop();this._is_running||this.hideCategories(a,
!0)}.bind(this)))},hideCategories:function(a){a=this.getElementsByName(a);var b,c,d;a.block.getParent().setStyle("height","auto");a.block.getElements(this.options.selectors.hidden_elements).each(function(a){d=function(){a.hide();this.options.use_animation&&a.setStyle("margin-top",b)}.bind(this);if(this.options.use_animation){var f=this.getFxStyles(a);b=parseInt(a.getStyle("margin-top"),this.options.radix);c=parseInt(a.getStyle("margin-bottom"),this.options.radix);f.start({opacity:0,"margin-top":-b-
c-a.offsetHeight}).addEvent("onComplete",d)}else d()}.bind(this));a.show_more_btn.show();a.hide_more_btn.hide()},showHiddenCategories:function(a){a=this.getElementsByName(a);var b,c;a.block.getParent().setStyle("height","auto");a.block.getElements(this.options.selectors.hidden_elements).each(function(a){if(this.options.use_animation){var e=this.getFxStyles(a);a.show();b=parseInt(a.getStyle("margin-top"),this.options.radix);c=parseInt(a.getStyle("margin-bottom"),this.options.radix);a.setStyle("margin-top",
-c-a.offsetHeight);a.setStyle("opacity",0);e.start({opacity:1,"margin-top":b})}else a.show()}.bind(this));a.show_more_btn.hide();a.hide_more_btn.show()},getElementsByName:function(a){return this._elements[a]},getFxStyles:function(a){a.fx_styles=new Fx.Styles(a,{onStart:function(){this._is_running=!0}.bind(this),onComplete:function(){this._is_running=!1}.bind(this)});return a.fx_styles}});SearchMenuCategoriesLeft_class.implement(new Options);
var GoodsPriceBlockFormatter_class=new Class({_class:"GoodsPriceBlockFormatter_class",_template:'{if icon_view == "tile"}\n\t{if sell_status != \'unavailable\' && parseFloat(old_price) > parseFloat(price)}\n\t\t<div class="g-price-old">\n\t\t\t<div name="price" class="g-price-old-inner">\n\t\t\t\t<div class="g-price-old-uah">\n\t\t\t\t\t${old_price_formatted}<span class="g-price-old-uah-sign">&thinsp;${price_old_unit}</span>\n\t\t\t\t</div>\n\t\t\t\t{if show_usd_price && price_usd != null}\n\t\t\t\t\t<div class="detail-price-usd">${price_usd}</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n\t<div name="price" class="g-price{if parseFloat(old_price) > parseFloat(price)} g-price-cheaper{/if}">\n\t\t<div class="g-price-uah">${price_formatted}<span class="g-price-uah-sign">&thinsp;${price_unit}</span></div>\n\t</div>\n{else}\n\t<div class="g-price-old">\n\t\t{if !hide_old_price && parseFloat(old_price) > parseFloat(price)}\n\t\t\t<div class="g-price-old-inner">\n\t\t\t\t<div class="g-price-old-uah">\n\t\t\t\t\t${old_price_formatted}<span class="g-price-old-uah-sign">&thinsp;${price_old_unit}</span>\n\t\t\t\t</div>\n\t\t\t\t{if show_usd_price && price_usd != null}\n\t\t\t\t\t<div class="detail-price-usd">${price_usd}</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n\t<div name="price" class="g-price g-price{if !hide_old_price && parseFloat(old_price) > parseFloat(price)}-cheaper{/if}">\n\t\t<div class="g-price-uah">${price_formatted}<span class="g-price-uah-sign">&thinsp;${price_unit}</span></div>\n\t</div>\n{/if}\n\n',
options:{price:null,old_price:null,price_usd:null,status:null,sell_status:null,hide_old_price:null,icon_view:null,price_unit:null,price_old_unit:null,show_usd_price:!1},initialize:function(a){this.setOptions(a)},getFormattedPrice:function(){return App.getHTML(this._template,this.options)},setFormattedPrice:function(a){var b=this.getFormattedPrice();$$("#goods_price_block_"+a).setHTML(b)}});GoodsPriceBlockFormatter_class.implement(new Options,new Events,new InitElements);
var TrackBar_class=new Class({_inputLeft:null,_inputRight:null,_elem:null,_elemLeft:null,_elemRight:null,_elemRange:null,_labelLeft:null,_labelRight:null,_limitLeft:null,_limitRight:null,_sliderLeft:null,_sliderRight:null,options:{name:"",inputLeftName:"",inputRightName:"",limitLeft:0,limitRight:10,valueLeft:null,valueRight:null,value:null,sliderLeftSrc:"imgtrackbar/b_l.gif",sliderRightSrc:"imgtrackbar/b_r.gif",dual:1,createHiddenInputs:1,extremumValueToNull:0,decimals:2,step:null,values:[]},initialize:function(a){this.setOptions(a);
this._bound={start:this._start.bindWithEvent(this),drag:this._drag.bindWithEvent(this),stop:this._stop.bind(this),resize:this.update.bind(this)};this.prototype=TrackBar_class;this.prototype.items.push(this)},init:function(){this._createControlElem();this._createHiddenInputs();with(this.options)this._setLabelValue(this._limitLeft,limitLeft),this._setLabelValue(this._limitRight,limitRight),this.update();window.addListener("resize",this._bound.resize);return this},update:function(){with(this.options){var a=
!dual&&value?value:valueLeft;this._setValueRight(dual?valueRight:a);this._setValueLeft(a)}},_createControlElem:function(){document.write('<div id="trackbar'+this.options.name+'"></div>');this._elem=$("trackbar"+this.options.name);var a=(new Element("tr")).inject((new Element("tbody")).inject((new Element("table")).inject(this._elem)));this._elemLeft=(new Element("td",{"class":"lb"})).inject(a);this._elemRange=(new Element("td",{"class":"cb"})).inject(a).setOpacity(".75");this._elemRight=(new Element("td",
{"class":"rb"})).inject(a);a=(new Element("div")).setStyles({position:"relative",width:"100%","text-align":"right","white-space":"nowrap"}).inject(this._elemLeft);this._labelLeft=(new Element("span")).inject(a).setStyles({position:"absolute","z-index":10});this._limitLeft=(new Element("span",{"class":"limit"})).setStyles({"text-align":"left",position:"absolute","z-index":10}).inject(a);this._sliderLeft=(new Element("img",{"class":"left-slider",src:this.options.sliderLeftSrc})).inject(a);this._sliderLeft.addEvent("mousedown",
this._bound.start);a=(new Element("div")).setStyles({position:"relative",width:"100%","white-space":"nowrap"}).inject(this._elemRight);this._labelRight=(new Element("span")).inject(a).setStyles({position:"absolute","z-index":10});this._limitRight=(new Element("span",{"class":"limit"})).setStyles({position:"absolute","z-index":10}).inject(a);this._sliderRight=(new Element("img",{"class":"right-slider",src:this.options.sliderRightSrc})).inject(a);this._sliderRight.addEvent("mousedown",this._bound.start)},
_createHiddenInputs:function(){with(this.options)createHiddenInputs&&(this._inputLeft=(new Element("input",{type:"hidden",name:inputLeftName?inputLeftName:dual?name+"[min]":name,value:valueLeft})).injectBefore(this._elem),dual&&(this._inputRight=(new Element("input",{type:"hidden",name:inputRightName?inputRightName:name+"[max]",value:valueRight})).injectBefore(this._elem)))},_start:function(a){this.slider=a.target;this.slider===this._sliderRight?this.sliderShift=a.page.x-a.target.getLeft():this.slider===
this._sliderLeft&&(this.sliderShift=a.page.x-a.target.getLeft()-a.target.offsetWidth);this.values={l:this.options.valueLeft,r:this.options.valueRight,v:this.options.value};document.addListener("mousemove",this._bound.drag);document.addListener("mouseup",this._bound.stop);a.stop()},_drag:function(a){var b=(a.page.x-this._elem.getLeft()-this.sliderShift-this._sliderLeft.offsetWidth)/(this._elem.offsetWidth-this._sliderLeft.offsetWidth-this._sliderRight.offsetWidth),b=(this.options.limitRight-this.options.limitLeft)*
b+this.options.limitLeft,b=b.toFixed(this.options.decimals).toFloat();$defined(this.options.step)&&(b/=this.options.step,b=Math.round(b)*this.options.step);this.options.dual?this.slider===this._sliderRight?this._setValueRight(b):this.slider===this._sliderLeft&&this._setValueLeft(b):(this._setValueLeft(b),this._setValueRight(b));a.stop()},_stop:function(){document.removeListener("mousemove",this._bound.drag);document.removeListener("mouseup",this._bound.stop);this.values.l==this.options.valueLeft&&
this.values.r==this.options.valueRight&&this.values.v==this.options.value||this.fireEvent("change");this.values=this.sliderShift=this.slider=null},_setValueLeft:function(a){with(this.options)this.options.valueLeft=this._checkValue(a,limitLeft,valueRight,limitLeft),this._inputLeft&&(this._inputLeft.value=null!=valueLeft?valueLeft:""),this._setLabelValue(this._labelLeft,null!=valueLeft?valueLeft:limitLeft),this._elemLeft.setStyle("width",this._width(null==valueLeft?limitLeft:valueLeft)+this._sliderLeft.offsetWidth+
"px"),this._updateRangeWidth();return this.options.valueLeft},_setValueRight:function(a){with(this.options)this.options.valueRight=this._checkValue(a,valueLeft,limitRight,limitRight),this.options.dual&&(this._inputRight&&(this._inputRight.value=null!=valueRight?valueRight:""),this._setLabelValue(this._labelRight,null!=valueRight?valueRight:limitRight)),this._elemRight.setStyle("width",this._elem.offsetWidth-this._width(null==valueRight?limitRight:valueRight)-this._sliderRight.offsetWidth+"px"),this._updateRangeWidth();
return this.options.valueRight},_checkValue:function(a,b,c,d){b=b||this.options.limitLeft;c=c||this.options.limitRight;a=null==a?null:a<b?b:a>c?c:a;return a==d&&this.options.extremumValueToNull?null:a},_setLabelValue:function(a,b){a.setText($chk(this.options.values[b])?this.options.values[b]:b)},_width:function(a){return Math.round((a-this.options.limitLeft)/(this.options.limitRight-this.options.limitLeft)*(this._elem.offsetWidth-(this._sliderLeft.offsetWidth+this._sliderRight.offsetWidth)))},_updateRangeWidth:function(){var a=
this.options.dual?this._elem.offsetWidth-this._elemRight.getStyle("width").toFloat()-this._elemLeft.getStyle("width").toFloat():0;this._elemRange.setStyle("width",a+"px")}});TrackBar_class.implement(new Events,new Options);TrackBar_class.items=[];
var RozetkaTrackBar_class=TrackBar_class.extend({options:{name:"",inputLeftName:"",inputRightName:"",limitLeft:0,limitRight:10,valueLeft:null,valueRight:null,value:null,sliderLeftSrc:"https://i.rozetka.ua/design/_.gif",sliderRightSrc:"https://i.rozetka.ua/design/_.gif",dual:1,createHiddenInputs:1,extremumValueToNull:0,decimals:2,values:[],active_href:"https://rozetka.com.ua/",filter_href:null},initialize:function(a){this.setOptions(a);this._bound={start:this._start.bindWithEvent(this),drag:this._drag.bindWithEvent(this),
stop:this._stop.bind(this),resize:this.update.bind(this),update:this.update.bind(this),set:this._set.bindWithEvent(this),key_down:this._onKeyDown.bind(this),submit:this._sendFilter.bindWithEvent(this)};this.prototype=TrackBar_class;this.prototype.items.push(this);window.addEvent("updateTrackBar",this._bound.update)},_sendFilter:function(a){(new Event(a)).stop();a=this.options.filter_href;this.options.active_href.length!=this.options.filter_href.length&&(a=a.slice(0,-1),a+=";");var b=null==this.options.valueLeft?
"":this.options.valueLeft,c=null==this.options.valueRight?"":this.options.valueRight;a=""==b&&""==c?this.options.active_href:a+(this.options.name+"="+b+"-"+c+"/");this.options.send_to_event?document.fireEvent(this.options.send_to_event,{name:this.options.name,valueLeft:b,valueRight:c}):window.location=a},_createHiddenInputs:function(){with(this.options)createHiddenInputs?(this._inputLeft=(new Element("input",{type:"hidden",name:inputLeftName?inputLeftName:dual?name+"[min]":name,value:valueLeft})).injectBefore(this._elem),
dual&&(this._inputRight=(new Element("input",{type:"hidden",name:inputRightName?inputRightName:name+"[max]",value:valueRight})).injectBefore(this._elem))):inputLeftName&&(this._inputLeft=$(inputLeftName),this._inputLeft.addListener("change",this._bound.set),this._inputLeft.addEvent("keydown",this._bound.key_down),dual&&(this._inputRight=$(inputRightName),this._inputRight.addListener("change",this._bound.set),this._inputRight.addEvent("keydown",this._bound.key_down)),$("submit"+name).addListener("click",
this._bound.submit))},_onKeyDown:function(a){13==a.keyCode&&(this._set(a),this._sendFilter(a))},_createControlElem:function(){this._elem=$("trackbar"+this.options.name);var a=(new Element("tr")).inject((new Element("tbody")).inject((new Element("table")).inject(this._elem)));this._elemLeft=(new Element("td",{"class":"lb"})).inject(a);this._elemRange=(new Element("td",{"class":"cb"})).inject(a).setOpacity(".75");this._elemRight=(new Element("td",{"class":"rb"})).inject(a);a=(new Element("div")).setStyles({position:"relative",
width:"100%","text-align":"right","white-space":"nowrap"}).inject(this._elemLeft);this._labelLeft=(new Element("span")).inject(a).setStyles({position:"absolute","z-index":10});this._limitLeft=(new Element("span",{"class":"limit"})).setStyles({"text-align":"left",position:"absolute","z-index":10,display:"none"}).inject(a);this._sliderLeft=(new Element("img",{"class":"left-slider",src:this.options.sliderLeftSrc})).inject(a);this._sliderLeft.addEvent("mousedown",this._bound.start);a=(new Element("div")).setStyles({position:"relative",
width:"100%","white-space":"nowrap"}).inject(this._elemRight);this._labelRight=(new Element("span")).inject(a).setStyles({position:"absolute","z-index":10});this._limitRight=(new Element("span",{"class":"limit"})).setStyles({position:"absolute","z-index":10,display:"none"}).inject(a);this._sliderRight=(new Element("img",{"class":"right-slider",src:this.options.sliderRightSrc})).inject(a);this._sliderRight.addEvent("mousedown",this._bound.start)},_set:function(a){a=this._inputLeft.value.toFloat();
var b=this._inputRight.value.toFloat();a?this._setValueLeft(this.roundFloat(a,this.options.decimals)):this._setValueLeft(this.options.limitLeft);b?this._setValueRight(this.roundFloat(b,this.options.decimals)):this._setValueRight(this.options.limitRight)},_setValueLeft:function(a){with(this.options)valueLeft=this._checkValue(a,limitLeft,valueRight,limitLeft),this._inputLeft&&valueLeft&&(this._inputLeft.value=valueLeft),this._elemLeft.setStyle("width",this._width(null==valueLeft?limitLeft:valueLeft)+
this._sliderLeft.offsetWidth+"px"),this._updateRangeWidth();return this.options.valueLeft},_setValueRight:function(a){with(this.options)valueRight=this._checkValue(a,valueLeft,limitRight,limitRight),this.options.dual&&this._inputRight&&valueRight&&(this._inputRight.value=valueRight),this._elemRight.setStyle("width",this._elem.offsetWidth-this._width(null==valueRight?limitRight:valueRight)-this._sliderRight.offsetWidth+"px"),this._updateRangeWidth();return this.options.valueRight},roundFloat:function(a,
b){b||(b=0);return Math.round(a*Math.pow(10,b))/Math.pow(10,b)}});RozetkaTrackBar_class.implement(new Events,new Options);RozetkaTrackBar_class.items=[];
var RozetkaFilterController_class=new Class({options:{selectors:{form:"filter_parameters_form",title:'[name="filter_parameters_title"]',blocks:'[name="filter_parameters_block"]',more_button:'[name="show_more_parameters"]',hide_button:'[name="hide_more_parameters"]',hidden_elems:"[can_hide=1]"},count_days_to_save:0,parameter_toggle_class:"filter-parametrs-i-hidden",storage_name:"catalog_parameters"},_magic_number:864E5,_elems:{},_storage_name:null,_storage_data:{},_is_state_saved:!1,initialize:function(a){this.setOptions(a);
this._storage_name=this.options.storage_name;this._storage_data=App.getStorage().get(this._storage_name)||{};this._storage_data.items=this._storage_data.items||{};this._storage_data.expire_time&&(this.options.count_days_to_save&&this._storage_data.expire_time>(new Date).getTime()?this._is_state_saved=!0:App.getStorage().set(this._storage_name,{}));document.getElementById(this.options.selectors.form).getElements(this.options.selectors.blocks).each(function(a){var c=a.getProperty("param");this._elems[c]=
{block:a,params_block:a.getElement("[name=filter_parameters]"),params_title:a.getElement(this.options.selectors.title),show_more_btn:a.getElement(this.options.selectors.more_button),hide_more_btn:a.getElement(this.options.selectors.hide_button)};this._initBlockEvents(c);this._initBlockValuesEvents(c)}.bind(this))},_initBlockEvents:function(a){var b=this.getElemsByName(a),c=function(){b.params_title.removeEvent("click",c);b.block.toggleClass(this.options.parameter_toggle_class);App.addOnDomReady(function(){this._getSlider(a,
d).toggle()}.bind(this));this._updateStorageData(a,{param_minimized:b.block.hasClass(this.options.parameter_toggle_class)});var e=b.block.hasClass(this.options.parameter_toggle_class)?"hide":"expand";document.fireEvent("filterBlockToggle",{extend_event:[{name:"eventContext",value:b.params_title.innerText},{name:"eventContent",value:e}]})}.bind(this),d=function(){b.params_block.show();b.params_title.addEvent("click",c)},e=this._storage_data.items[a];b.params_title.addEvent("click",c);this._is_state_saved&&
e&&e.hasOwnProperty("param_minimized")&&(e.param_minimized?b.params_block.addClass("hidden"):b.params_block.removeClass("hidden"));b.params_block.hasClass("hidden")&&(b.block.toggleClass(this.options.parameter_toggle_class),App.addOnDomReady(function(){this._getSlider(a,d).slideOut()}.bind(this)))},_initBlockValuesEvents:function(a){var b=this.getElemsByName(a),c=this._storage_data.items[a];b.show_more_btn&&b.hide_more_btn&&(b.show_more_btn.addEvent("click",function(c){(new Event(c)).stop();this.showHiddenParameters(a,
!0);this._updateStorageData(a,{params_hidden:!1});document.fireEvent("filterShowMoreButtonClick",{extend_event:[{name:"eventContext",value:b.params_title.innerText}]})}.bind(this)),b.hide_more_btn.addEvent("click",function(b){(new Event(b)).stop();this.hideParameters(a,!0);this._updateStorageData(a,{params_hidden:!0})}.bind(this)),this._is_state_saved&&c&&c.hasOwnProperty("params_hidden")&&(c.params_hidden?this.hideParameters(a,!1):this.showHiddenParameters(a,!1)))},_updateStorageData:function(a,
b){this._storage_data.expire_time=(new Date).getTime()+this.options.count_days_to_save*this._magic_number;"object"!=typeof this._storage_data.items[a]&&(this._storage_data.items[a]={});Object.each(b,function(b,d){this._storage_data.items[a][d]=b}.bind(this));App.getStorage().set(this._storage_name,this._storage_data)},_getSlider:function(a,b){var c=this.getElemsByName(a);c.params_title.slider||(c.params_title.slider=new Fx.Slide(c.params_block,{onComplete:b}));return c.params_title.slider},hideParameters:function(a,
b){var c=this.getElemsByName(a),d,e;c.params_block.getParent().setStyle("height","auto");c.params_block.getElements(this.options.selectors.hidden_elems).each(function(a){e=function(){a.hide();this._needEffect(c.params_block,b)&&a.setStyle("margin-top",d)}.bind(this);this._needEffect(c.params_block,b)?(d=parseInt(a.getStyle("margin-top"),10),(new Fx.Style(a,"opacity")).start(0),(new Fx.Style(a,"margin-top",{onComplete:e})).start(-d-a.offsetHeight)):e()}.bind(this));c.show_more_btn.show();c.hide_more_btn.hide()},
showHiddenParameters:function(a,b){var c=this.getElemsByName(a),d;c.params_block.getParent().setStyle("height","auto");c.params_block.getElements(this.options.selectors.hidden_elems).each(function(a){this._needEffect(c.params_block,b)?(d=parseInt(a.getStyle("margin-top"),10),a.show(),a.setStyle("margin-top",d-a.offsetHeight),a.setStyle("opacity",0),(new Fx.Style(a,"opacity")).start(1),(new Fx.Style(a,"margin-top")).start(d)):a.show()}.bind(this));c.show_more_btn.hide();c.hide_more_btn.show()},_needEffect:function(a,
b){var c=!(a.hasAttribute("data-without-effect")&&a.getAttribute("data-without-effect"));return b&&c},getElemsByName:function(a){return this._elems[a]}});RozetkaFilterController_class.implement(new Options);
var GTMData_BaseProduct_class=GTMData_BaseAbstract_class.extend({Class:"GTMData_BaseProduct_class",options:{GTM:{events:{add_to_wishlist_in_cart:{event_name:"clickToWishlistInCart",extend_event:[{name:"eventCategory",value:"Conversions"},{name:"eventLabel",value:"addToWishlist"},{name:"eventLocation",value:"cart"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventProductName",handlerID:"getProductTitle"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},
{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},openWishlistPopup:{event_name:"openWishlistPopup",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventLabel",value:"popupWishlist"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventProductName",handlerID:"getProductTitle"},
{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},add_to_order_in_cart:{event_name:"clickAddToOrderInCart",extend_event:[{name:"eventCategory",value:"Conversions"},{name:"eventLabel",value:"buyButton"},{name:"eventLocation",value:"recommendedCart"},{name:"eventProductId",
handlerID:"getProductId"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventProductName",handlerID:"getProductTitle"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductPromo",handlerID:"getProductTag"},{name:"eventContent",handlerID:"getContent"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"},{name:"eventProductVendorId",handlerID:"getProducerId"}]},
cancel_delete_from_cart:{event_name:"clickCancelDeleteFromCart",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLabel",value:"cancel"},{name:"eventLocation",value:"cart"}]},close_wishlist_in_cart:{event_name:"closeWishlistInCart",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLabel",value:"closeWishlist"}]},continue_shopping:{event_name:"clickContinueShopping",extend_event:[{name:"eventAction",
value:"click"},{name:"eventLabel",value:"continueShopping"}]},open_profile:{event_name:"clickOpenProfile",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLabel",value:"openProfile"},{name:"eventLocation",value:"cart"}]},open_wishlist:{event_name:"clickOpenWishlist",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLabel",value:"openWishlist"},{name:"eventContext",handlerID:"getContext"}]},
save_wishlist:{event_name:"clickSaveWishlist",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLabel",value:"saveWishlist"},{name:"eventLocation",value:"cart"}]},social:{event_name:"clickSocial",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLabel",value:"social"},{name:"eventLocation",value:"cart"}]},open_cart:{event_name:"openCart",extend_event:[{name:"eventCategory",value:"Conversions"},
{name:"eventAction",value:"click"},{name:"eventLabel",value:"openCart"}]},show_accessories:{event_name:"sendAccessoriesGTM",extend_event:[{name:"eventCategory",value:"Non-Interactions"},{name:"eventAction",value:"show"},{name:"eventLabel",value:"goods"}]},close_cart:{event_name:"closeCart",extend_event:[{name:"eventCategory",value:"Conversions"},{name:"eventAction",value:"click"},{name:"eventLabel",value:"closeCart"}]},openCityPopup:{event_name:"clickToPopupCity",extend_event:[{name:"eventCategory",
value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLabel",value:"cityPopup"},{name:"eventLocation",value:"Head"}]},changeCity:{event_name:"changeCity",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLabel",value:"cityChoose"},{name:"eventLocation",value:"head"}]},add_to_cart:{event_name:"clickToPurchases",extend_event:[{name:"eventCategory",value:"Conversions"},{name:"eventLabel",value:"buyButton"},{name:"eventProductId",handlerID:"getProductId"},
{name:"eventValue",handlerID:"getProductPrice"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventProductPromo",handlerID:"getProductTag"},{name:"eventContent",handlerID:"getContent"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"},{name:"eventContent",handlerID:"getProductSource"}]},add_service_from_cart:{event_name:"addServiceToPurchases",
extend_event:[{name:"eventCategory",value:"Conversions"},{name:"eventLabel",value:"buyButton"},{name:"eventAction",value:"click"}]},remove_service_from_cart:{event_name:"removeServiceFromPurchases",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventLabel",value:"service"},{name:"eventAction",value:"remove"}]},check_service:{event_name:"checkService",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventLabel",value:"service"},{name:"eventAction",value:"click"},{name:"eventContent",
value:"check"}]},uncheck_service:{event_name:"uncheckService",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventLabel",value:"service"},{name:"eventAction",value:"click"},{name:"eventContent",value:"uncheck"}]},add_to_comparison:{event_name:"clickAddToCompare",extend_event:[{name:"eventLabel",value:"addToCompare"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventProductName",handlerID:"getProductTitle"},{name:"eventProductCategoryId",
handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventContext",handlerID:"getProductCountComments"},{name:"eventContent",handlerID:"getContent"},{name:"eventPosition",handlerID:"getPosition"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},change_quantity:{event_name:"changeQuantityPurchases",extend_event:[{name:"eventLabel",value:"changeQuantity"},
{name:"eventProductId",handlerID:"getProductId"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventProductName",handlerID:"getProductTitle"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},scroller:{event_name:"scrollerUse",extend_event:[{name:"eventAction",
value:"scroll"}]},suggest:{event_name:"suggestShow",extend_event:[{name:"eventAction",value:"show"},{name:"eventCategory",value:"Interactions"},{name:"eventLabel",value:"suggest"},{name:"eventNoninteraction",value:1}]},goods_title_click:{event_name:"goodsTitleClick",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLabel",value:"openProductPage"},{name:"eventContext",value:"title"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventContent",
handlerID:"getContent"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventPosition",handlerID:"getPosition"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},goods_image_click:{event_name:"goodsImageClick",extend_event:[{name:"eventCategory",value:"Interactions"},
{name:"eventAction",value:"click"},{name:"eventLabel",value:"openProductPage"},{name:"eventContext",value:"photo"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventContent",handlerID:"getContent"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventPosition",handlerID:"getPosition"},{name:"eventMerchantId",
handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},variant_image_click:{event_name:"variantImageClick",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLocation",value:"OtherColorPopUpCatalog"},{name:"eventLabel",value:"openProductPage"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventContext",value:"photo"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},
{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventPosition",handlerID:"getPosition"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},delete_from_cart:{event_name:"deleteFromPurchases",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"remove"},{name:"eventLabel",value:"product"},{name:"eventLocation",value:"cart"},{name:"eventProductId",
handlerID:"getProductId"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"},{name:"products",handler:"getKitProducts"}]},before_delete_from_cart:{event_name:"beforeDeleteFromPurchases",extend_event:[{name:"eventCategory",
value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLabel",value:"remove"},{name:"eventContent",value:location.href},{name:"eventLocation",value:"cart"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},
add_kit_to_cart:{event_name:"clickKitToPurchases",extend_event:[{name:"eventCategory",value:"Conversions"},{name:"eventLabel",value:"buyKit"},{name:"eventLocation",value:"kitCart"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventContent",value:"set"},{name:"products",handler:"getKitProducts"}]},to_checkout_from_cart:{event_name:"goToCheckoutFromCart",extend_event:[{name:"eventLabel",value:"checkout"}]},to_checkout_from_head:{event_name:"goToCheckoutFromHead",
extend_event:[{name:"eventLabel",value:"checkout"},{name:"eventLocation",value:"Head"}]},recent_save:{event_name:"clickSaveRecent",extend_event:[{name:"eventLabel",value:"saveRecentHistory"}]},show_recent:{event_name:"showAllRecentGoods",extend_event:[{name:"eventLabel",value:"openRecentHistory"}]},for_gift_in_cart:{event_name:"forGiftClick",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventLabel",value:"forPresent"}]},not_added_to_cart:{event_name:"not_added_to_cart",extend_event:[{name:"eventCategory",
value:"Conversions"},{name:"eventLabel",value:"notAdd"},{name:"eventAction",value:"error"},{name:"eventNoninteraction",value:1},{name:"eventProductId",handlerID:"getProductId"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"}]},open_cart_popup:{event_name:"openCart",extend_event:[{name:"eventLabel",value:"showAll"},{name:"eventLocation",value:"SearchBar"}]},open_category_search:{event_name:"openCategorySearch",extend_event:[{name:"eventLabel",value:"openCategory"},{name:"eventLocation",
value:"SearchBar"}]},show_category_search:{event_name:"showCategorySearch",extend_event:[{name:"eventLabel",value:"showCategory"},{name:"eventAction",value:"show"},{name:"eventLocation",value:"SearchBar"}]},search_button:{event_name:"searchButton",extend_event:[{name:"eventLabel",value:"searchButton"},{name:"eventLocation",value:"searchResults"}]},comparison_header:{selector:"[id=comparison]",extend_event:[{name:"eventLabel",value:"comparison"}]},wishlist_header:{event_name:"clickWishlistHeader",
extend_event:[{name:"eventLabel",value:"wishlist"}]},enter_profile:{event_name:"enterProfile",extend_event:[{name:"eventLabel",value:"enterProfile"},{name:"eventContext",value:"permanent"}]},choose_compare:{event_name:"chooseCompare",extend_event:[{name:"eventLabel",value:"chooseCompare"}]},profile_menu:{event_name:"profileMenu",extend_event:[{name:"eventLabel",value:"profileMenu"}]},profile:{event_name:"profile",extend_event:[{name:"eventLabel",value:"profile"}]},openBonusesPopup:{event_name:"openBonusesPopup",
extend_event:[{name:"eventLabel",value:"openBonusesPopup"},{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventContent",handlerID:"getUserPLStatus"},{name:"eventLocation",handlerID:"getPLEventLocation"}]},useBonuses:{event_name:"useBonuses",extend_event:[{name:"eventLabel",value:"useBonuses"},{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventContent",handlerID:"getUserPLStatus"},{name:"eventLocation",handlerID:"getPLEventLocation"}]},
enterProfile:{event_name:"enterProfile",extend_event:[{name:"eventLabel",value:"enterProfile"},{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventContent",handlerID:"getUserPLStatus"},{name:"eventLocation",handlerID:"getPLEventLocation"}]},openRozetkaClubPage:{event_name:"openRozetkaClubPage",extend_event:[{name:"eventLabel",value:"openRozetkaClubPage"},{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventContent",handlerID:"getUserPLStatus"},
{name:"eventLocation",handlerID:"getPLEventLocation"}]},wantConfirmPhone:{event_name:"wantConfirmPhone",extend_event:[{name:"eventLabel",value:"wantConfirmPhone"},{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventContent",handlerID:"getUserPLStatus"},{name:"eventLocation",handlerID:"getPLEventLocation"}]},registration:{event_name:"registration",extend_event:[{name:"eventLabel",value:"registration"},{name:"eventCategory",value:"Conversions"}]},remove:{event_name:"removeFromComparison",
extend_event:[{name:"eventLabel",value:"product"},{name:"eventAction",value:"remove"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventProduct\u0421ategoryId",handlerID:"getProductCategoryId"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventLocation",value:"compare"},{name:"eventProduct\u0421ategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},
closeAuthPopup:{event_name:"closeAuthPopup",extend_event:[{name:"eventLabel",value:"closeAuthPopup"}]},social_signup_success:{event_name:"social_signup_success",extend_event:[{name:"eventCategory",value:"Conversions"},{name:"eventAction",value:"signup"},{name:"eventLabel",value:"social"}]},more20productCompare:{event_name:"more20productCompare",extend_event:[{name:"eventLabel",value:"more20productCompare"},{name:"eventAction",value:"show"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"}]},
carousel_scroll:{event_name:"carousel_scroll",extend_event:[{name:"eventLabel",value:"kit"},{name:"eventAction",value:"scroll"},{name:"eventLocation",value:"ProductPage"},{name:"eventContent",value:"complement"}]},productsImpressions:{event_name:"productsImpressions",extend_event:[{name:"eventCategory",value:"Non-Interactions"},{name:"eventAction",value:"show"},{name:"eventLabel",value:"goods"}]},track_order:{event_name:"trackOrder",extend_event:[{name:"eventLabel",value:"trackOrder"},{name:"eventLocation",
value:"head"}]},registrationSuccess:{event_name:"registrationSuccess",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"signup"},{name:"eventLabel",value:"registrationSuccess"}]}}}},base_GTM_event:{eventCategory:"Interactions",eventAction:"click"},storage:null,initialize:function(a,b){this.storage=a;void 0!==b&&this.setOptions(b);this.options.additional.base_GTM_event&&Object.merge(this.base_GTM_event,this.options.additional.base_GTM_event)},getProductId:function(a){return parseInt(a,
10)},getProductPrice:function(a,b){var c=this.storage.getGoodsDataField(a,"price_usd",b);c&&(c=parseFloat(c));return c},getProductSource:function(a,b){return this.storage.getGoodsDataField(a,"source",b)},getProductTag:function(a,b){return this.storage.getGoodsDataField(a,"tag",b)},getProductTitle:function(a,b){return this.storage.getGoodsDataField(a,"title",b)},getProductCategoryId:function(a,b){var c=this.storage.getGoodsDataField(a,"parent_id",b);c&&(c=parseInt(c,10));return c},getProducerId:function(a,
b){var c=this.storage.getGoodsDataField(a,"producer_id",b);c&&(c=parseInt(c,10));return c},getTopParentId:function(a,b){var c=this.storage.getGoodsDataField(a,"top_parent_id",b);c&&(c=parseInt(c,10));return c},getPosition:function(a){a=$E("[name=position_number"+a+"]")||$E("[name=slider_pos_number"+a+"]");var b=null;a&&a.value&&(b=parseInt(a.value,10));return b},getTitle:function(a){return(a.target||a.srcElement).getText().trim()},getProductCategoryName:function(a,b){return this.storage.getGoodsDataField(a,
"parent",b)},getProductCountComments:function(a,b){return this.storage.getGoodsDataField(a,"count_comments",b)},getKitProducts:function(a){var b=[],c=[],d=1,e,f=["product\u0421ategoryId","product\u0421ategoryGroupId"],g=function(a){Object.each(a,function(a){"object"==typeof a?g(a):a&&parseInt(a,10)&&c.push(a)})};a.goods_ids&&(g(a.goods_ids),c.each(function(a){e={productId:this.getProductId(a),productName:this.getProductTitle(a),productVendorId:this.getProducerId(a),productQuantity:1,position:d++,
productMerchantId:this.getMerchantId(a),productSellerId:this.getSellerId(a)};e[f[0]]=this.getProductCategoryId(a);e[f[1]]=this.getTopParentId(a);this.getProductPrice(a)&&(e.productPrice=this.getProductPrice(a));b.push(e)}.bind(this)));return b},getContent:function(a){var b=null;(a=$$("[name=content_gtm"+a+"]")[0])&&a.value&&(b=a.value);return b},getContext:function(){return User.isAuth()?"existingUser":"newUser"},getSellerId:function(a,b){var c=this.storage.getGoodsDataField(a,"seller_id",b);c&&(c=
parseInt(c,10));return c},getPLEventLocation:function(){var a;$defined(User.pl_data)&&(a=User.pl_data.is_header?"rozetkaClub Head":"rozetkaClub ProductPage");return a},getUserPLStatus:function(){var a;User.isAuth()?$defined(User.pl_data)&&(a=User.pl_data.loyalty_accepted?User.pl_data.exist_phone?"Active":"Unverified":"Unconfirm"):a="notAuthorized";return a},getMerchantId:function(a,b){var c=this.storage.getGoodsDataField(a,"merchant_id",b);c&&(c=parseInt(c,10));return c},_getCurrentTargetData:function(a){var b=
new Event;return b&&b.event.currentTarget&&b.event.currentTarget.data(a)}}),GTMData_CatalogPage_class=GTMData_BaseProduct_class.extend({Class:"GTMData_CatalogPage_class",options:{GTM:{events:{add_to_wishlist:{event_name:"clickToWishlist",extend_event:[{name:"eventCategory",value:"Conversions"},{name:"eventLabel",value:"addToWishlist"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventProductName",handlerID:"getProductTitle"},{name:"eventProductCategoryId",
handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},add_to_waitlist:{event_name:"addToWaitlist",extend_event:[{name:"eventCategory",value:"Conversions"},{name:"eventLabel",value:"addToWaitlist"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventProductName",
handlerID:"getProductTitle"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},goods_title_click:{extend_event:[{name:"eventLabel",value:"openProductPage"},{name:"eventContext",value:"title"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventValue",handlerID:"getProductPrice"},
{name:"eventProductName",handlerID:"getProductTitle"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventPosition",handlerID:"getPosition"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},goods_image_click:{extend_event:[{name:"eventLabel",value:"openProductPage"},{name:"eventContext",value:"photo"},{name:"eventProductId",
handlerID:"getProductId"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventProductName",handlerID:"getProductTitle"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventPosition",handlerID:"getPosition"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},more_button_click:{event_name:"clickMoreButton",
extend_event:[]},page_number_click:{event_name:"pageNumberClick",extend_event:[{name:"eventLabel",value:"pageNumber"}]},show_all_click:{selector:"[name=show_all_goods]",extend_event:[{name:"eventLabel",value:"showAll"}]},select_filter_size:{event_name:"select_filter_size",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLabel",value:"select"}]},select_filter_model:{event_name:"select_filter_model",extend_event:[{name:"eventCategory",value:"Interactions"},
{name:"eventAction",value:"click"},{name:"eventLabel",value:"select"}]},change_view:{event_name:"changeView",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventLabel",value:"view"}]},sort_click:{event_name:"sortClick",extend_event:[{name:"eventLabel",value:"sort"}]},apply_filter:{event_name:"applyFilter",extend_event:[{name:"eventLabel",value:"filter"}]},reset_all_filters:{event_name:"resetAllFilters",extend_event:[{name:"eventLabel",value:"resetFilters"}]},info_master_card:{event_name:"infoMasterCardClick",
extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventLabel",value:"infoMasterCard"},{name:"eventAction",value:"click"},{name:"eventLocation",value:"Catalog"}]},bonus_master_card:{event_name:"bonusMasterCardClick",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventLabel",value:"bonusMasterCard"},{name:"eventAction",value:"click"},{name:"eventLocation",value:"Catalog"}]},promotion_label:{event_name:"promotionLabelClick",extend_event:[{name:"eventCategory",value:"Interactions"},
{name:"eventLabel",value:"promotionLabel"},{name:"eventAction",value:"click"},{name:"eventLocation",value:"Catalog"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},overview:{event_name:"reviewOverviewClick",
extend_event:[{name:"eventLabel",value:"overview"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},overview_3d:{event_name:"review3dClick",extend_event:[{name:"eventLabel",value:"3dmodel"},{name:"eventProductId",handlerID:"getProductId"},
{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},full_overview:{event_name:"reviewFullOverviewClick",extend_event:[{name:"eventLabel",value:"fullOverview"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventMerchantId",
handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},comments_link_click:{event_name:"commentsLinkClick",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventLabel",value:"viewReview"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventPosition",handlerID:"getPosition"},
{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},comments_quick_link_click:{event_name:"commentsLinkQuickClick",extend_event:[{name:"eventCategory",value:"Interactions"},{name:"eventLabel",value:"viewReview"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventPosition",
handlerID:"getPosition"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},tips:{selector:'[name="catalog_tips"]',extend_event:[{name:"eventLabel",value:"tips"},{name:"eventContent",handler:"getEventContentProperty"}]},news:{selector:'[name="catalog_news"]',extend_event:[{name:"eventLabel",value:"news"},{name:"eventContent",handler:"getEventContentProperty"}]},more_filter:{event_name:"filterShowMoreButtonClick",extend_event:[{name:"eventLabel",value:"moreFilter"}]},
toggle_filter:{event_name:"filterBlockToggle",extend_event:[{name:"eventLabel",value:"openFilter"}]},product:{event_name:"product",extend_event:[{name:"eventAction",value:"remove"},{name:"eventLabel",value:"product"},{name:"eventLocation",value:"compare"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventProductCategoryId",handlerID:"getProductCategoryId"},{name:"eventProductCategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventValue",
handlerID:"getProductPrice"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},resetFilters:{event_name:"resetFilters",extend_event:[{name:"eventLabel",value:"resetFilters"}]},click_scroll_to_top:{event_name:"scrollToTopClick",extend_event:[{name:"evenCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLabel",value:"up"}]},click_quick_view:{event_name:"QuickViewClick",extend_event:[{name:"evenCategory",value:"Interactions"},
{name:"eventAction",value:"click"},{name:"eventLabel",value:"openQuickPreview"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventProduct\u0421ategoryId",handlerID:"getProductCategoryId"},{name:"eventProduct\u0421ategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventMerchantId",handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},click_variants_view:{event_name:"QuickVariantsClick",
extend_event:[{name:"evenCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLabel",value:"openQuickPreview"},{name:"eventValue",handlerID:"getProductPrice"},{name:"eventLocation",value:"photoPopUpCatalog"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventProduct\u0421ategoryId",handlerID:"getProductCategoryId"},{name:"eventProduct\u0421ategoryGroupId",handlerID:"getTopParentId"},{name:"eventProductVendorId",handlerID:"getProducerId"},{name:"eventMerchantId",
handlerID:"getMerchantId"},{name:"eventSellerId",handlerID:"getSellerId"}]},click_zoom_btn:{event_name:"ZoomBtnClick",extend_event:[{name:"evenCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLabel",value:"photoPopup"},{name:"eventContext",value:"loupe"},{name:"eventLocation",value:"CatalogLight"}]},click_preview_image:{event_name:"PreviewImageClick",extend_event:[{name:"evenCategory",value:"Interactions"},{name:"eventAction",value:"click"},{name:"eventLabel",value:"photoRewind"},
{name:"eventValue",handlerID:"getProductPrice"},{name:"eventProductId",handlerID:"getProductId"},{name:"eventLocation",value:"photoPopUpCatalogLight"}]},photo_rewind:{event_name:"photoRewind",extend_event:[{name:"evenCategory",value:"Interactions"},{name:"eventAction",value:"change"},{name:"eventLabel",value:"photoRewind"},{name:"eventLocation",handler:"getPopupCatalogType"}]},load_more_goods:{event_name:"loadMoreGoods",extend_event:[{name:"evenCategory",value:"Interactions"},{name:"eventAction",
value:"send"},{name:"eventLabel",value:"goods"},{name:"products",handler:"getProductsData"}]},rg_load:{event_name:"recentGoodsViewed",extend_event:[{name:"eventCategory",value:"Non-Interactions"},{name:"eventAction",value:"show"},{name:"eventLabel",value:"goods"}]},catalog_top_load:{event_name:"CatalogTopLoaded",extend_event:[{name:"eventCategory",value:"Non-Interactions"},{name:"eventAction",value:"show"},{name:"eventLabel",value:"goods"}]}}}},base_GTM_event:{eventLocation:"Catalog"},getEventContentProperty:function(a){a=
(new Event(a)).target;return a.getProperty("event_content")||a.getParent().getProperty("event_content")},getProductsData:function(a){var b=[],c=a.page_number?a.page_number:1;a&&a.hasOwnProperty("goods_ids")&&a.goods_ids.each(function(a,e){var f=e*c;this.storage.existGoodsData(a)&&b.push({productID:String(a),productPosition:String(f),productName:this.storage.getGoodsDataField(a,"title"),productPrice:this.storage.getGoodsDataField(a,"price_usd"),productCategoryID:String(this.storage.getGoodsDataField(a,
"parent_id")),productVendorID:String(this.storage.getGoodsDataField(a,"producer_id")),productLocation:"CatalogLight"})}.bind(this));return b},getPopupCatalogType:function(a){return"photoPopUp"+this.base_GTM_event.eventLocation}}),FilterLock_class=new Class({Class:"FilterLock_class",parentElem:null,initialize:function(a){this.parentElem=a},_getElements:function(){null==this._elems&&(this._elems=$ES("input[type=checkbox], label a, a[name=reset], button, span a",this.parentElem.id));return this._elems},
run:function(){this._getElements()&&this._getElements().each(function(a){a.addEvent("click",this._itemClickHandler.bind(this))}.bind(this))},_itemClickHandler:function(a){a=new Event(a);a.control||1!=!a.event.button||this.parentElem.processStart('<img src="https://i1.rozetka.ua/design/check-ajax.gif" width="64" height="64" alt="&nbsp;" class="process"/>')}});FilterLock_class.implement(new Options);
var RzImageLazyLoad=function(){return{windowLowerPoint:0,lastVisibleImageIndex:0,allImages:[],initialized:!1,init:function(){if(!this.initialized){this.reloadImages();this.recountLowerPoint();this.checkVisibility();var a=this;$(window).addEvent("scroll",function(){a.recountLowerPoint();a.checkVisibility()});App.addEvent("renewImages",function(){a.reloadImages();a.recountLowerPoint();a.checkVisibility()});this.initialized=!0}},reloadImages:function(){return this.allImages=$$(".rz-lazy-load")},recountLowerPoint:function(){return this.windowLowerPoint=
(window.scrollY||document.documentElement.scrollTop||0)+window.getHeight()},isImageVisible:function(a){a=(a=a.getPosition&&a.getPosition())&&a.y;return a<this.windowLowerPoint+100},checkVisibility:function(){for(var a=this.lastVisibleImageIndex,b=this.allImages.length;a<b;a++)if(this.isImageVisible(this.allImages[a]))this.allImages[a].getAttribute("src")!=this.allImages[a].getAttribute("data-rz-lazy-load-src")&&this.allImages[a].setAttribute("src",this.allImages[a].getAttribute("data-rz-lazy-load-src")),
this.lastVisibleImageIndex=a;else break}}}();App.addOnDomReady(function(){var a=$("parameters-filter-form");a&&(a=new FilterLock_class(a),a.run());RzImageLazyLoad.init()});
var RozetkaSortDropDownMenu=RozetkaDropDownMenu.extend({_fx:[],_current_fx:{},_current_element:{},_dropElements:[],options:{parent_name:"div[name=drop_parent]",action_elements:"a[name=drop_link]",drop_elements:"div[name=drop_menu]",elements:"[name=active-element]",styles:{visibility:"hidden"},delay:0,stop_events:!0},run:function(){this.getDropElements().each(function(a){this._parent=this.getParent();a.setStyles(this.options.styles);a.lock=!1;this._dropElements.push(a);var b=new Fx.Styles(a,{duration:0,
wait:!1});this._fx.push(b);a.addEvents({mouseenter:function(){a.lock=!0}.bind(this),show:function(){a.lock=!0;this.show(a,b)}.bind(this),hide:function(){a.lock=!1;this.hide.delay(50,this,[a])}.bind(this)})}.bind(this));this.getActionElements().each(function(a){var b=this.getDropElement(a);b&&(this._closePopup=function(){$(document.body).removeEvent("click",this._closePopup);a.lock=!0;b.fireEvent("hide")}.bind(this),a.lock=!0,a.removeEvents("click"),a.addEvents({click:function(c){(new Event(c)).stop();
a.lock=!a.lock;this.fireEventDelay=function(a){a.lock?b.fireEvent("hide"):b.fireEvent("show")};$(document.body).removeEvent("click",this._closePopup);$(document.body).addEvent("click",this._closePopup);this.fireEventDelay.delay(this.options.delay,this,[a])}.bind(this)}),this.options.stop_events&&b.addEvent("click",function(a){(new Event(a)).stop()}),b.getElements(this.options.elements).each(function(c){c.addEvent("click",function(c){a.lock=!0;b.fireEvent("hide")}.bind(this))}.bind(this)))}.bind(this))},
show:function(a,b){b.setOptions({duration:0}).start({opacity:1})},hide:function(a){a.lock||this.getFx(a).setOptions({duration:0}).start({opacity:0})},getFx:function(a){if(this._current_element!=a||!this._current_fx)for(var b=0;b<this._dropElements.length;b++)if(a==this._dropElements[b]){fx=this._fx[b];this._current_element=a;this._current_fx=fx;break}return this._current_fx}}),HideFiltersBlock=new Class({options:{filtersId:"{}"},_storage_data:{},_magic_number:864E5,initialize:function(a){this._storage_data=
App.getStorage().get("catalog_parameters")||{};this._storage_data.items=this._storage_data.items||{};this._storage_data.expire_time=(new Date).getTime()+this._magic_number;"{}"!=a.filtersId&&(Object.each(a.filtersId,function(a,c){this._storage_data.items[a]={param_minimized:!0}}.bind(this)),App.getStorage().set("catalog_parameters",this._storage_data))}});
GoodsCatalog.enableSmallBuyButtonsForTilePage=function(){SplitTests&&SplitTests.setVariant&&SplitTests.setVariant("ab_catalog_button","new");GoodsCatalog.setOptions({elements:{search:{dynamic:{buy_search:{tpl_name:"buy_catalog",additional_data:{action:"search",view_type:"catalog_with_hover",is_tile:1}}}}}})};var RZ_APP=RZ_APP||{};
(function(a,b){a.promoPopup={init:function(){$$(".popup-close").addEvent("click",function(){$$(".popup-addprice").addClass("hidden");$$(".rz-popup-wrapper").addClass("hidden")});$$(".rz-popup-wrapper").addEvent("click",function(){$$(".popup-addprice").addClass("hidden");$$(".rz-popup-wrapper").addClass("hidden")})},addPopup:function(a,b){var e=$E("#"+a);e&&e.addEvent("click",function(){$$(".popup-addprice").removeClass("hidden");$$(".rz-popup-wrapper").removeClass("hidden");$$(".popup-addprice-description").setHTML(b)})}}})(RZ_APP);
var RzRozetkaPaginator_class=new Class({Class:"RzRozetkaPaginator_class",options:{template:'{for node in getPages()}\n\t<li class="paginator-catalog-l-i{if node.is_active} active{/if}" id="${node.name}">\n\t\t{if node.is_active}\n\t\t\t<span class="novisited paginator-catalog-l-link">${node.title}</span>\n\t\t{else}\n\t\t\t<span class="paginator-catalog-l-i-active hidden">${node.title}</span>\n\t\t\t<a href="${node.link}"\n\t\t\t   class="novisited paginator-catalog-l-link"\n\t\t\t   onclick="document.fireEvent(\'pageNumberClick\',{extend_event:[{name:\'eventContext\',value:\'${node.value}\'}]});"\n\t\t\t>${node.title}</a>\n\t\t{/if}\n\t</li>\n{/for}',
page_param_name:"page",index_correction:0,midpoint:5,symbol_hellip:"&hellip;",additional_params:[],starts_from:1,current_page:0,total_pages:0},pages:[],_url:null,_container:null,initialize:function(a,b){this._container=a;this._url=b;return this},init:function(){this.options.starts_from=this.options.current_page;this.addEvent("loadComplete",this._loadComplete.bind(this));this.attachToObserver(["ChangeShowType"]);return this},onChangeShowType:function(){this._updatePaginator()},_loadComplete:function(a){this.options.current_page=
a;this._updatePaginator()},_getPageUrl:function(a){var b=document.location.search,c=b.match(/p=([\-\d]+)/),b=c?b.replace(c[0],"p="+a):b?b+"&p="+a:"?p="+a;new_url=this._url+b;new_url=new_url.replace(/\/$/g,"");return new_url+document.location.hash},_updatePaginator:function(){var a=(this.options.midpoint-1)/2,b=this.options.current_page+this.options.index_correction,c=Math.floor(b-a),a=Math.ceil(b+a);this.pages=[];this.pages[1]=this._getPageData(1);2==this.options.total_pages-a&&a++;for(b=c;b<=a;b++)1<
b&&b<this.options.total_pages&&(this.pages[b]=this._getPageData(b,c,a));this.pages[this.options.total_pages]=this._getPageData(this.options.total_pages);this._container.setHTML(App.getHTML(this.options.template,this))},getPages:function(){return this.pages},_getPageData:function(a,b,c){var d=a+this.options.index_correction;return{link:this._getPageUrl(d),name:"page"+d,value:a,title:this._isHellip(a,b,c)?this.options.symbol_hellip:a,is_active:a>=this.options.starts_from&&a<=this.options.current_page}},
_isHellip:function(a,b,c){return a==b&&2<a||a==c&&c<this.options.total_pages-2}});RzRozetkaPaginator_class.implement(new Events,new Options);
var RzRozetkaEndlessScroll_class=EndlessScroll_class.extend({options:{items_per_page:24,button_text_selector:"[name=button_text]",last_button_text:"",preloader_class:"run-animation",paginator:{classname:"RzRozetkaPaginator_class",enabled:!1,midpoint:5,selector:"[name=paginator]",index_correction:0,additional_params:{}}},clicks_count:0,_container:null,_paginator:null,initialize:function(a,b){this._container=a;this.url=b;this.attachToObserver([])},init:function(){this.content=this._container.getElement(this.options.content_selector);
this.more_button=this._container.getElement(this.options.more_button_selector);this.paginator=this._container.getElement(this.options.paginator_selector);this._bindEvents();var a=this._container.getElement(this.options.paginator.selector);this.options.paginator.enabled&&a&&(this._paginator=(new (App.getConstructorByClassName(this.options.paginator.classname))(a,this.url)).setOptions({total_pages:this.options.total_pages,current_page:this.options.current_page,midpoint:this.options.paginator.midpoint,
index_correction:this.options.paginator.index_correction,additional_params:this.options.paginator.additional_params,page_param_name:this.options.page_param_name}).init())},showPage:function(a){0<a&&a!=this.options.current_page&&a<=this.options.total_pages&&(this.more_button.processStart(""),this.more_button.addClass(this.options.preloader_class),this.enabled=!1,this._sendRequest(a),this.clicks_count++,document.fireEvent("clickMoreButton",{extend_event:[{name:"eventLabel",value:this.options.items_per_page+
"goodsMore"},{name:"eventPosition",value:this.clicks_count}]}))},_getUrl:function(a){var b={};b[this.options.page_param_name]=a;return App.buildUrl(this.url,Object.merge(b,this.options.additional_params))},_isHideMoreButton:function(){return this.options.current_page==this.options.total_pages},_sendRequest:function(a){var b=document.location.search,c=b.match(/p=([\-\d]+)/);if(c)var d=this.options.current_page+1,b=b.replace(c[0],"p="+d);else d=this.options.current_page+1,b=b?b+"&p="+d:"?p="+d;url=
this.options.ajax_url+b;(new Ajax(url,{method:"get",use_language:!0,onComplete:function(b){var c=[];this.more_button.removeClass(this.options.preloader_class);this.more_button.processStop();this.options.current_page=a;b=(new Element("div")).setHTML(b);var d=b.getElements("script");this.options.append_to_bottom||(this.content.innerHTML="",window.scrollTo(0,this.content.offsetTop));this.more_button.getParent().removeChild(this.more_button);b.getChildren().each(function(a){this.content.adopt(a);c.push(a)}.bind(this));
this._isHideMoreButton()||(this.content.adopt(this.more_button),""!=this.options.last_button_text&&this.options.current_page==this.options.total_pages-1&&(this.more_button.getElement(this.options.button_text_selector).innerHTML=this.options.last_button_text),this.enabled=!0);(!window.gecko||window.ff4AndGreater)&&d.length&&d.each(this._execute);App.fireEvent("renewImages");this.firePluginEvent("loadContentComplete");this._paginator&&this._paginator.fireEvent("loadComplete",this.options.current_page);
document.fireEvent("loadContentComplete");this.fireEvent("LoadBodyPage",c)}.bind(this)})).request()}});RzRozetkaEndlessScroll_class.implement(new Events,new Options,new PluginEvents_class);
var RzRozetkaSearchEndlessScroll_class=RzRozetkaEndlessScroll_class.extend({options:{current_page:1,page_param_name:"p",search:{text:""}},_params:{scroll:"true"},initialize:function(a,b){this._params.hasOwnProperty("p")&&(this.options.current_page=this._params.p.toInt());this.parent(a,b)},init:function(){this.options.paginator.additional_params=this._getQueryParams(document.location.search);this._params=Object.merge(this._params,this.options.paginator.additional_params);this.parent()},_getQueryParams:function(a){a=
a.split("+").join(" ");for(var b={},c,d=/[?&]?([^=]+)=([^&]*)/g;c=d.exec(a);)b[RZ_APP.helpers.decodeURIComponent(c[1])]=RZ_APP.helpers.decodeURIComponent(c[2]);return b},_getBasePath:function(){var a=document.location.pathname;if("/"==a||"/search/"==a)a="";return document.location.origin+a}}),NewRozetkaTrackBar_class=RozetkaTrackBar_class.extend({_set:function(a){a=this._inputLeft.value.replace(",",".").match(/^\d+(?:\.\d\d?)?/);var b=this._inputRight.value.replace(",",".").match(/^\d+(?:\.\d\d?)?/);
a?(a=0===this.options.decimals?parseInt(a[0]):a[0].toFloat(),this._setValueLeft(a,this.options.decimals)):this._setValueLeft(this.options.limitLeft);b?(b=0===this.options.decimals?parseInt(b[0]):b[0].toFloat(),this._setValueRight(b,this.options.decimals)):this._setValueRight(this.options.limitRight)},_setValueLeft:function(a){with(this.options)valueLeft=this._checkValue(a,limitLeft,valueRight,limitLeft,!0),this._inputLeft.value=valueLeft,this._elemLeft.setStyle("width",this._width(null==valueLeft?
limitLeft:valueLeft)+this._sliderLeft.offsetWidth+"px"),this._updateRangeWidth();return this.options.valueLeft},_setValueRight:function(a){with(this.options)valueRight=this._checkValue(a,valueLeft,limitRight,limitRight,!1),this.options.dual&&this._inputRight&&valueRight&&(this._inputRight.value=valueRight),this._elemRight.setStyle("width",this._elem.offsetWidth-this._width(null==valueRight?limitRight:valueRight)-this._sliderRight.offsetWidth+"px"),this._updateRangeWidth();return this.options.valueRight},
_checkValue:function(a,b,c,d,e){null!==a&&(e?a<b?a=b:a>=c&&(a=c):a<=b?a=b:a>c&&(a=c));return a==d&&this.options.extremumValueToNull?null:a}}),HideMinCategoriesLeft_class=new Class({options:{container:"search-m-cat-left",radix:10,group_controls:{show_categories:"show_hidden_categories",hide_categories:"hide_hidden_categories"},use_animation:!0},_controls:{},_hiddenCategories:[],initialize:function(a){var b=document.getElementById(this.options.container);a=b.getElementById(this.options.group_controls.show_categories);
b=b.getElementById(this.options.group_controls.hide_categories);a&&b&&(this._controls={show_categories:a.addEvent("click",function(a){(new Event(a)).stop();this._is_running||this.showHiddenCategoriesGroup()}.bind(this)).parentElement,hide_categories:b.addEvent("click",function(a){(new Event(a)).stop();this._is_running||this.hideHiddenCategoriesGroup()}.bind(this))},this._hiddenCategories=Array.prototype.slice.call(document.getElementsByClassName("m-cat-l-i-fl")))},showHiddenCategoriesGroup:function(){var a,
b;this._hiddenCategories.each(function(c){if(this.options.use_animation){var d=this.getFxStyles(c);c.removeClass("hidden").show();a=parseInt(c.getStyle("margin-top"),this.options.radix);b=parseInt(c.getStyle("margin-bottom"),this.options.radix);c.setStyle("margin-top",-b-c.offsetHeight+15);c.setStyle("opacity",0);d.start({opacity:1,"margin-top":a})}else c.show()}.bind(this));this._controls.show_categories.hide().style.display="none";this._controls.hide_categories.show().style.display="block"},hideHiddenCategoriesGroup:function(){var a;
this._hiddenCategories.each(function(b){a=function(){b.hide();this.options.use_animation&&b.setStyle("margin-top",margin_top)}.bind(this);if(this.options.use_animation){var c=this.getFxStyles(b);margin_top=parseInt(b.getStyle("margin-top"),this.options.radix);margin_bottom=parseInt(b.getStyle("margin-bottom"),this.options.radix);c.start({opacity:0,"margin-top":-margin_top-margin_bottom-b.offsetHeight}).addEvent("onComplete",a)}}.bind(this));this._controls.show_categories.show().style.display="block";
this._controls.hide_categories.hide().style.display="none"},getFxStyles:function(a){a.fx_styles=new Fx.Styles(a,{onStart:function(){this._is_running=!0}.bind(this),onComplete:function(){this._is_running=!1}.bind(this)});return a.fx_styles}});GoodsPriceBlockFormatter_class.implement(new Options);
